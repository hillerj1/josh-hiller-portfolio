---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const all = await getCollection('projects');
const software = all.filter((p) => p.data.group === 'Software')
  .sort((a,b)=>(b.data.date??'').localeCompare(a.data.date??''));
const quantum = all.filter((p) => p.data.group === 'Quantum')
  .sort((a,b)=>(b.data.date??'').localeCompare(a.data.date??''));
  /* NEW */
const certs = (await getCollection('certifications')).sort((a,b)=>(b.data.date??'').localeCompare(a.data.date??''));
const quotes = (await getCollection('testimonials')).sort((a,b)=>(b.data.date??'').localeCompare(a.data.date??''));
---

<Layout title="Josh Hiller — Portfolio">
  <!-- HOME / HERO -->
	<section id="home" class="hero">
  <div class="container">
    <h1 class="hero-title">Josh Hiller</h1>

    <p class="subtitle">
      Actively seeking roles in software engineering, quantum computing, or related fields.
    </p>

    <div class="scroll-cue" aria-hidden="true">
      <span>Scroll</span>
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 9l6 6 6-6" />
      </svg>
    </div>
  </div>
</section>


  <!-- PROJECTS -->
  <section id="projects" class="section">
    <div class="container">
      <h2 class="h1 mb-sm">Projects</h2>

      <h3 class="mb-sm">Quantum Computing</h3>
      <div class="grid">
        {quantum.map(({ slug, data }) => (
          <a href={`/projects/${slug}/`} class="card-link">
            <img src={data.image} alt={data.title} loading="lazy" />
            <div style="padding:16px 16px 18px;">
              <div class="muted mb-xs">{data.category}</div>
              <h4 style="margin:0 0 6px;font-size:1.1rem;">{data.title}</h4>
              <p class="muted" style="line-height:1.45;">{data.summary}</p>
            </div>
          </a>
        ))}
      </div>

      <h3 class="mt-md mb-sm">Software Engineering</h3>
      <div class="grid">
        {software.map(({ slug, data }) => (
          <a href={`/projects/${slug}/`} class="card-link">
            <img src={data.image} alt={data.title} loading="lazy" />
            <div style="padding:16px 16px 18px;">
              <div class="muted mb-xs">{data.category}</div>
              <h4 style="margin:0 0 6px;font-size:1.1rem;">{data.title}</h4>
              <p class="muted" style="line-height:1.45;">{data.summary}</p>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- CERTIFICATIONS -->
<section id="certifications" class="section">
  <div class="container">
    <h2 class="h1 mb-sm">Certifications</h2>
    <div class="grid">
      {certs.map(({ data }) => (
        <div class="card" style="display:flex;gap:14px;align-items:flex-start;">
          {data.image ? <img src={data.image} alt={data.title} style="width:56px;height:56px;object-fit:contain;border-radius:10px;" /> : null}
          <div style="flex:1;">
            <div style="display:flex;gap:8px;align-items:baseline;flex-wrap:wrap;">
              <strong>{data.title}</strong>
              <span class="muted">· {data.issuer}</span>
            </div>
            {data.date ? <div class="muted" style="font-size:.9rem;margin-top:4px;">{data.date}</div> : null}
            {data.skills?.length ? (
              <ul class="tag-list" style="margin-top:8px;">
                {data.skills.map((s) => <li class="tag">{s}</li>)}
              </ul>
            ) : null}
            <div style="display:flex;gap:10px;margin-top:8px;">
              {data.verifyUrl ? <a href={data.verifyUrl} target="_blank" rel="noopener" class="link">Verify</a> : null}
              {data.credentialId ? <span class="muted">ID: {data.credentialId}</span> : null}
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<!-- TESTIMONIALS -->
<section id="testimonials" class="section">
  <div class="container">
    <h2 class="h1 mb-sm">Testimonials</h2>
    <div class="grid">
      {quotes.map(({ data }) => (
        <blockquote class="card" style="margin:0;display:grid;grid-template-columns:auto 1fr;gap:14px;align-items:center;">
          {data.avatar ? <img src={data.avatar} alt={data.author} style="width:56px;height:56px;border-radius:50%;object-fit:cover;" /> : null}
          <div>
            <p style="margin:0 0 8px;line-height:1.5;">“{data.quote}”</p>
            <footer class="muted" style="font-size:.95rem;">
              — {data.author}
              {data.role ? `, ${data.role}` : ''}{data.org ? `, ${data.org}` : ''}
              {data.link ? (
                <>
                  {' · '}
                  <a href={data.link} class="link" target="_blank" rel="noopener">Profile</a>
                </>
              ) : null}
            </footer>
          </div>
        </blockquote>
      ))}
    </div>
  </div>
</section>


  <!-- ABOUT -->
  <section id="about" class="section">
    <div class="container">
      <h2 class="h1 mb-sm">About Me</h2>
      <div class="card">
        <p>
          I’m Josh Hiller, a software engineer and physics student focused on quantum computing.
          I enjoy building robust software and exploring algorithms for near-term and future quantum devices.
          Recent work includes Qiskit-based projects, computational physics simulations, and Manim visualizations.
        </p>
        <p>
          I’m interested in roles that blend systems thinking with applied research—developer tooling,
          simulation frameworks, or quantum applications.
        </p>
      </div>
    </div>
  </section>

  <!-- CONTACT (Netlify form, no backend needed) -->
  <section id="contact" class="section">
    <div class="container">
      <h2 class="h1 mb-sm">Contact</h2>
      <form name="contact" method="POST" data-netlify="true" class="card" style="max-width:720px;">
        <input type="hidden" name="form-name" value="contact" />
        <label>Name<br/><input name="name" required style="width:100%;padding:10px;border-radius:10px;border:none;margin:6px 0 12px;background:#0b1220;color:#e5e7eb"/></label>
        <label>Email<br/><input name="email" type="email" required style="width:100%;padding:10px;border-radius:10px;border:none;margin:6px 0 12px;background:#0b1220;color:#e5e7eb"/></label>
        <label>Message<br/><textarea name="message" rows="6" required style="width:100%;padding:10px;border-radius:10px;border:none;margin:6px 0 12px;background:#0b1220;color:#e5e7eb"></textarea></label>
        <button class="btn btn-primary" type="submit">Send</button>
      </form>

      <p class="muted mt-md">
        Or reach me at <a class="link" href="mailto:your.email@example.com">your.email@example.com</a>
        · <a class="link" href="https://github.com/hillerj1" target="_blank" rel="noopener">GitHub</a>
        · <a class="link" href="https://www.linkedin.com/in/your-handle" target="_blank" rel="noopener">LinkedIn</a>
      </p>
    </div>
  </section>
</Layout>
