---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const all = await getCollection('projects');
const software = all.filter((p) => p.data.group === 'Software')
  .sort((a, b) => (b.data.date ?? '').localeCompare(a.data.date ?? ''));
const quantum = all.filter((p) => p.data.group === 'Quantum')
  .sort((a, b) => (b.data.date ?? '').localeCompare(a.data.date ?? ''));
---

<Layout title="Projects â€” Josh Hiller">
  <main style="max-width:1100px;margin:0 auto;padding:28px 20px 60px;">
    <h1 style="margin:0 0 20px;">Projects</h1>

    <h2 id="quantum" style="font-size:1.3rem;margin:22px 0 12px;">Quantum Computing</h2>
    <div style="display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));">
      {quantum.map(({ slug, data }) => (
        <a href={`/projects/${slug}/`} style="text-decoration:none;color:inherit;border-radius:16px;overflow:hidden;background:#fff;box-shadow:0 6px 20px rgba(0,0,0,.08);display:flex;flex-direction:column;">
          <img src={data.image} alt={data.title} style="width:100%;aspect-ratio:16/9;object-fit:cover;" loading="lazy" />
          <div style="padding:16px 16px 18px;">
            <div style="font-size:.85rem;opacity:.7;margin-bottom:6px;">{data.category}</div>
            <h3 style="margin:0 0 6px;font-size:1.1rem;">{data.title}</h3>
            <p style="margin:0;opacity:.8;line-height:1.45;">{data.summary}</p>
          </div>
        </a>
      ))}
    </div>

    <h2 id="software" style="font-size:1.3rem;margin:26px 0 12px;">Software Engineering</h2>
    <div style="display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));">
      {software.map(({ slug, data }) => (
        <a href={`/projects/${slug}/`} style="text-decoration:none;color:inherit;border-radius:16px;overflow:hidden;background:#fff;box-shadow:0 6px 20px rgba(0,0,0,.08);display:flex;flex-direction:column;">
          <img src={data.image} alt={data.title} style="width:100%;aspect-ratio:16/9;object-fit:cover;" loading="lazy" />
          <div style="padding:16px 16px 18px;">
            <div style="font-size:.85rem;opacity:.7;margin-bottom:6px;">{data.category}</div>
            <h3 style="margin:0 0 6px;font-size:1.1rem;">{data.title}</h3>
            <p style="margin:0;opacity:.8;line-height:1.45;">{data.summary}</p>
          </div>
        </a>
      ))}
    </div>
  </main>
</Layout>
