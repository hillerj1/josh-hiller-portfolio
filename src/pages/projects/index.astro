---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const all = await getCollection('projects');
const software = all.filter((p) => p.data.group === 'Software').sort((a,b)=>(b.data.date??'').localeCompare(a.data.date??''));
const quantum  = all.filter((p) => p.data.group === 'Quantum').sort((a,b)=>(b.data.date??'').localeCompare(a.data.date??''));
---

<Layout title="Projects â€” Josh Hiller" description="Software Engineering and Quantum Computing projects.">
  <main class="container pad-y-xl">
    <h1 class="h1 mb-sm">Projects</h1>

    <h2 class="mb-sm">Quantum Computing</h2>
    <div class="grid">
      {quantum.map(({ slug, data }) => (
        <a href={`/projects/${slug}/`} class="card-link">
          <img src={data.image} alt={data.title} loading="lazy" />
          <div style="padding:16px 16px 18px;">
            <div class="muted mb-xs">{data.category}</div>
            <h3 style="margin:0 0 6px;font-size:1.1rem;">{data.title}</h3>
            <p class="muted" style="line-height:1.45;">{data.summary}</p>
          </div>
        </a>
      ))}
    </div>

    <h2 class="mt-md mb-sm">Software Engineering</h2>
    <div class="grid">
      {software.map(({ slug, data }) => (
        <a href={`/projects/${slug}/`} class="card-link">
          <img src={data.image} alt={data.title} loading="lazy" />
          <div style="padding:16px 16px 18px;">
            <div class="muted mb-xs">{data.category}</div>
            <h3 style="margin:0 0 6px;font-size:1.1rem;">{data.title}</h3>
            <p class="muted" style="line-height:1.45;">{data.summary}</p>
          </div>
        </a>
      ))}
    </div>
  </main>
</Layout>
