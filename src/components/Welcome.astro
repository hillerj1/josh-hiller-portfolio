---
import { getCollection } from 'astro:content';

// Load and sort projects (newest first if date provided)
const projects = (await getCollection('projects'))
  .sort((a, b) => (b.data.date ?? '').localeCompare(a.data.date ?? ''));
---

<section style="max-width:1100px;margin:0 auto;padding:0 20px 60px;">
  <header style="text-align:center;padding:48px 0;">
    <h1 style="margin:0 0 8px;font-size:2.25rem;">Josh Hiller</h1>
    <p style="margin:0;opacity:.8;">Quantum computing · computational physics · software engineering</p>
    <p style="margin-top:12px;">
      <a href="/resume/Josh_Hiller_Resume.pdf" target="_blank" rel="noopener">Resume (PDF)</a>
    </p>
  </header>

  <h2 style="font-size:1.5rem;margin-bottom:16px;">Projects</h2>

  <div style="display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));">
    {projects.map(({ slug, data }) => (
      <a href={`/projects/${slug}/`} style="text-decoration:none;color:inherit;border-radius:16px;overflow:hidden;background:#fff;box-shadow:0 6px 20px rgba(0,0,0,.08);display:flex;flex-direction:column;">
        <img src={data.image} alt={data.title} style="width:100%;aspect-ratio:16/9;object-fit:cover;" loading="lazy" />
        <div style="padding:16px 16px 18px;">
          <div style="font-size:.85rem;opacity:.7;margin-bottom:6px;">{data.category}</div>
          <h3 style="margin:0 0 6px;font-size:1.1rem;">{data.title}</h3>
          <p style="margin:0;opacity:.8;line-height:1.45;">{data.summary}</p>
        </div>
      </a>
    ))}
  </div>
</section>
